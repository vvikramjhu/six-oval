<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapping PUBLIC "-//EXOLAB/Castor Mapping DTD Version 1.0//EN"
                         "http://castor.org/mapping.dtd">

<!-- /////////////////////////////////////////////////////////// -->
<!-- // Project SIX: OVAL                                     // -->
<!-- //                                                       // -->
<!-- // Castor JDO Mapping Specification                      // -->
<!-- /////////////////////////////////////////////////////////// -->

<!-- @author    Akihito Nakamura, AIST -->
<!-- @version   $Id: six-oval_castor-jdo-mapping.xml 1079 2010-12-24 10:35:24Z nakamura5akihito $ -->

<mapping>

    <!-- ======================================================= -->
    <!-- Test                                                    -->
    <!-- ======================================================= -->
    <class name="jp.go.aist.six.test.oval.core.store.inherit.Test"
        identity="persistentID">

        <cache-type type="none"/>
        <map-to table="oval_d_test"/>

        <field name="persistentID" type="string">
            <sql name="PID" type="char"/>
        </field>

        <field name="timeStamp" type="long"
            get-method="jdoGetTimeStamp"
            set-method="jdoSetTimeStamp"
            >
            <sql name="castor_ts" type="integer" />
        </field>

        <field name="ovalID" type="string">
            <sql name="id" type="char"/>
        </field>

        <field name="ovalVersion" type="integer">
            <sql name="version" type="integer"/>
        </field>

        <field name="comment" type="string">
            <sql name="comment" type="char"/>
        </field>

        <field name="deprecated" type="boolean">
            <sql name="deprecated" type="bit"/>
        </field>

        <field name="check" 
            type="jp.go.aist.six.oval.model.common.Check">
            <sql name="check1" type="char"/>
        </field>

        <field name="checkExistence" 
            type="jp.go.aist.six.oval.model.common.Existence">
            <sql name="existence" type="char"/>
        </field>

        <field name="stateOperator" 
            type="jp.go.aist.six.oval.model.common.Operator">
            <sql name="state_operator" type="char"/>
        </field>

        <field name="entityType" 
            type="jp.go.aist.six.oval.model.EntityType">
            <sql name="entity_type" type="char"/>
        </field>

        <field name="object.objectRef" type="string">
            <sql name="object_ref" type="char"/>
        </field>

        <field name="state"
            type="jp.go.aist.six.test.oval.core.store.inherit.StateRef"
            collection="collection"
            set-method="addState"
            get-method="getState">
            <sql many-key="d_test__PID"/>
        </field>
    </class>



    <!-- ======================================================= -->
    <!-- StateRef                                                -->
    <!-- ======================================================= -->
    <class name="jp.go.aist.six.test.oval.core.store.inherit.StateRef"
        depends="jp.go.aist.six.test.oval.core.store.inherit.Test"
        identity="persistentID"
        key-generator="IDENTITY"
        >

        <!-- cache-type type="unlimited"/ -->
        <map-to table="oval_d_test__state_ref"/>

        <field name="persistentID" type="string">
            <sql name="PID" type="integer"/>
        </field>

        <field name="stateRef" type="string">
            <sql name="state_ref" type="char"/>
        </field>

        <!-- (FK) -->
        <field name="masterObject" 
            type="jp.go.aist.six.test.oval.core.store.inherit.Test">
            <sql name="d_test__PID"/>
        </field>
    </class>



    <!-- ******************************************************* -->
    <!-- RegistryTest                                            -->
    <!-- ******************************************************* -->
    <class name="jp.go.aist.six.test.oval.core.store.inherit.RegistryTest"
        extends="jp.go.aist.six.test.oval.core.store.inherit.Test"
        identity="persistentID">

        <!-- cache-type type="unlimited"/ -->
        <map-to table="oval_d_test_registry"/>

        <field name="persistentID" type="string">
            <sql name="PID" type="char"/>
        </field>

<!-- 
        <field name="object.ovalID" type="string">
            <sql name="object__id" type="char"/>
        </field>

        <field name="state.ovalID" type="string">
            <sql name="state__id" type="char"/>
        </field>
-->
    </class>


</mapping>

